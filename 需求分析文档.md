# 需求分析文档

### 第一部分：业务流图

![.png](https://s2.loli.net/2024/12/09/v4H5s7pnLIO2jbF.png)

### 第二部分：数据流图

![.png](https://s2.loli.net/2024/12/09/LU5EkczK82HSRrO.png)

### 第三部分：数据词典

**用户信息**：
用户类型（店长，销售人员，顾客，游客）
**图书信息**
ISBN 号（20 个字符，每本正版书都有惟一的标识）、书名（60 个字符、作者（60 个字符）、关键字（可以有多个，总共不超过 60 个字符）、库存量（整型）、单价（实型）
**采购信息（按照采购顺序）**
ISBN 号（20个字符），采购数量（整型），进货价格（实型）
**销售情况（按照销售顺序）**
ISBN 号（20个字符），数量（整型），单价（实型）
**盈利信息**
该段时间的收入，支出，利润
**员工工作情况报告（按操作顺序）**
操作类型（字符），操作对象（字符）

### 第四部分：功能说明

**功能1：用户注册**
输入参数：
用户名：字符串（20个字符以内）
密码：字符串（20个字符以内）
输出参数：
注册成功或失败的提示信息
处理过程：
系统检查用户名是否已存在。
若用户名不存在，系统创建新账户，并将用户信息存储到用户数据文件中。
若用户名已存在，返回注册失败的提示信息。

**功能2：用户登录**
输入参数：
用户名：字符串（20个字符以内）
密码：字符串（20个字符以内）
输出参数：
登录成功或失败的提示信息
当前用户的身份和权限级别
处理过程：
系统验证用户名和密码是否正确。
若验证成功，返回登录成功信息并进入系统。
若验证失败，返回登录失败信息。

**功能3：图书查询**
输入参数：
查询条件：可以为ISBN号、书名、作者、关键字中的任意组合
输出参数：
符合条件的图书信息列表（包括ISBN号、书名、作者、库存量、单价等）
处理过程：
根据输入的查询条件，从图书数据文件中查找符合条件的图书。
将查询结果按要求格式输出。

**功能4：图书购买**
输入参数：
ISBN号：字符串（20个字符以内）
购买数量：整数（大于0）
输出参数：
订单生成成功或失败的提示信息
购买总金额
处理过程：
系统检查输入的ISBN号是否存在，库存是否足够。
若库存不足，返回购买失败信息。
若库存充足，生成订单，更新库存数据，记录订单信息到销售情况中。
返回购买成功的信息及购买总金额。

**功能5：图书信息录入**
输入参数：
ISBN号：字符串（20个字符以内）
书名：字符串（60个字符以内）
作者：字符串（60个字符以内）
关键字：字符串（最多60个字符）
库存量：整数（大于0）
单价：实数（大于0）
输出参数：
图书录入成功或失败的提示信息
处理过程：
系统验证ISBN号是否已存在。
若图书已存在，返回录入失败的信息。
若图书不存在，录入新的图书信息并保存到图书数据文件。

**功能6：修改图书信息**
输入参数：
ISBN号：字符串（20个字符以内）
修改内容：书名、作者、库存量、单价等字段（根据需求修改）
输出参数：
修改成功或失败的提示信息
处理过程：
系统查找输入的ISBN号对应的图书信息。
若图书存在，允许用户修改指定字段（如库存量、单价等）。
将修改后的信息更新到图书数据文件。

**功能7：进货**
输入参数：
ISBN号：字符串（20个字符以内）
进货数量：整数（大于0）
进货价格：浮动数（大于0）
输出参数：
进货成功或失败的提示信息
处理过程：
系统检查图书是否存在，如果不存在则返回失败信息。
若图书存在，更新库存量，并记录进货记录到采购信息。
返回进货成功的提示信息。

**功能8：查看销售情况**
输入参数：
起始时间：日期（YYYY-MM-DD）
结束时间：日期（YYYY-MM-DD）
输出参数：
销售记录列表：按照时间排序的销售图书记录（包括ISBN号、购买数量、单价等）
处理过程：
系统从订单数据文件中筛选出符合时间范围的销售记录。
输出符合条件的销售记录。

**功能9：查看采购情况**
输入参数：
起始时间：日期（YYYY-MM-DD）
结束时间：日期（YYYY-MM-DD）
输出参数：
采购记录列表：按照时间排序的采购图书记录（包括ISBN号、进货数量、进货价格等）
处理过程：
系统从进货记录文件中筛选出符合时间范围的采购记录。
输出符合条件的采购记录。

**功能10：查询盈利信息**
输入参数：
起始时间：日期（YYYY-MM-DD）
结束时间：日期（YYYY-MM-DD）
输出参数：
总收入：浮动数（总销售金额）
总支出：浮动数（总采购金额）
利润：浮动数（收入 - 支出）
处理过程：
系统计算在指定时间段内的所有订单总金额（收入）和所
